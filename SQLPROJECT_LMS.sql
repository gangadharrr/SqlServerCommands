USE [Learning Management System];

IF EXISTS (SELECT * FROM sysobjects WHERE name='LMS_BOOK_ISSUE' and xtype='U')
DROP TABLE LMS_BOOK_ISSUE
CREATE TABLE LMS_BOOK_ISSUE
(
	BOOK_ISSUE_NO INT IDENTITY(1,1) PRIMARY KEY,
	MEMBER_ID VARCHAR(10),
	BOOK_CODE VARCHAR(10),
	DATE_ISSUE DATE,
	DATE_RETURN DATE,
	DATE_RETURNED DATE,
	FINE_RANGE VARCHAR(3)
);

IF EXISTS (SELECT * FROM sysobjects WHERE name='LMS_BOOK_DETAILS' and xtype='U')
DROP TABLE LMS_BOOK_DETAILS
CREATE TABLE LMS_BOOK_DETAILS
(
	BOOK_CODE VARCHAR(10) PRIMARY KEY,
	BOOK_TITLE VARCHAR(50),
	CATEGORY VARCHAR(15),
	AUTHOR VARCHAR(30),
	PUBLICATION VARCHAR(30),
	PUBLISH_DATE DATE,
	BOOK_EDTION INT,
	PRICE FLOAT,
	RACK_NUM VARCHAR(3),
	SUPPLIER_ID VARCHAR(3)
);

IF EXISTS (SELECT * FROM sysobjects WHERE name='LMS_MEMBERES' and xtype='U')
DROP TABLE LMS_MEMBERES
CREATE TABLE LMS_MEMBERES(
	MEMEBER_ID VARCHAR(10) primary key,
	MEMEBER_NAEM VARCHAR(30),
	CITY VARCHAR(20),
	DATE_REGISTER DATE,
	DATE_EXPIRE DATE,
	MEMEBERSHIP_STATUS VARCHAR(15)
);

IF EXISTS (SELECT * FROM sysobjects WHERE name='LMS_FINE_DETAILS' and xtype='U')
DROP TABLE LMS_FINE_DETAILS
CREATE TABLE LMS_FINE_DETAILS(
	FINE_RAGE VARCHAR(3) PRIMARY KEY,
	FINE_AMOUNT INTEGER,
);

IF EXISTS (SELECT * FROM sysobjects WHERE name='LMS_SUPPLIERS_DETAILS' and xtype='U')
DROP TABLE LMS_SUPPLIERS_DETAILS
CREATE TABLE LMS_SUPPLIERS_DETAILS(
	SUPPLIER_ID VARCHAR(3) PRIMARY KEY,
	SUPPLIER_NAME VARCHAR(30),
	ADDRESS_ VARCHAR(50),
	CONTACT INTEGER,
	EMAIL VARCHAR(15)
);

TRUNCATE TABLE LMS_BOOK_ISSUE;
INSERT INTO LMS_BOOK_ISSUE VALUES
('LM001','BL000010','2012-05-01','2012-05-16','2012-05-16','R0'),
('LM002','BL000002','2012-05-01','2012-05-06','2012-05-16','R2'),
('LM003','BL000007','2012-04-01','2012-04-16','2012-04-20','R1'),
('LM004','BL000005','2012-04-01','2012-04-16','2012-04-20','R1'),
('LM005','BL000008','2012-03-30','2012-04-15','2012-04-20','R1'),
('LM006','BL000008','2012-04-20','2012-05-05','2012-05-05','R0'),
('LM007','BL000007','2012-04-22','2012-05-07','2012-05-25','R4');
SELECT * FROM LMS_BOOK_ISSUE

TRUNCATE TABLE LMS_BOOK_DETAILS;
INSERT INTO LMS_BOOK_DETAILS VALUES
('BL000010','Java For Dummies','JAVA','Paul j. Deitel','Prentice Hall','1999-12-10',6,575.00,'A1','S02'),
('BL000002','Java: The Complete Revesion','JAVA','Herbert Schildt','Tata Mcgraw Hill','2011-10-10',5,750.00,'A1','S03'),
('BL000003','Java: How To Do Program','JAVA','Paul j. Deitel','Prentice Hall','1999-05-10',6,600.00,'A1','S05'),
('BL000004','Java: The Complete Revesion','JAVA','Herbert Schildt','Tata Mcgraw Hill','2011-10-10',5,750.00,'A1','S06'),
('BL000005','Java: How To Do Program','JAVA','Paul j. Deitel','Prentice Hall','1999-05-10',6,600.00,'A1','S04'),
('BL000006','Java: The Complete Revesion','JAVA','Herbert Schildt','Tata Mcgraw Hill','2011-10-10',5,750.00,'A1','S01'),
('BL000007','Let Us C','C','Yashavant Kanetkar','BPB Publications','2010-12-11',9,500.00,'A3','S03'),
('BL000008','Let Us C','C','Yashavant Kanetkar','BPB Publications','2010-05-12',9,500.00,'A3','S05'),
('BL000009','Let Us C#','C','Yashavant Kanetkar','BPB Publications','2010-05-12',9,550.00,'A3','S02'),
('BL000011','Let Us C++','C','Yashavant Kanetkar','BPB Publications','2010-05-12',9,650.00,'A3','S04');
SELECT * FROM LMS_BOOK_DETAILS;

TRUNCATE TABLE LMS_MEMBERES;
INSERT INTO LMS_MEMBERES VALUES
('LM001','AMIT','CHENNAI','2012-02-12','2013-02-11','Temporary'),
('LM002','ABDHUL','DELHI','2012-04-10','2013-04-09','Temporary'),
('LM003','GAYAN','CHENNAI','2012-05-13','2013-05-12','Permanent'),
('LM004','RADHA','CHENNAI','2012-04-22','2013-04-21','Temporary'),
('LM005','GURU','BANGALORE','2012-03-30','2013-05-16','Temporary'),
('LM006','MOHAN','CHENNAI','2012-04-12','2013-05-16','Temporary');
SELECT * FROM LMS_MEMBERES;

TRUNCATE TABLE LMS_FINE_DETAILS;
INSERT INTO LMS_FINE_DETAILS VALUES
('R0',0.00),
('R1',20.00),
('R2',50.00),
('R3',75.00),
('R4',100.00),
('R5',150.00),
('R6',200.00)
SELECT * FROM LMS_FINE_DETAILS;

TRUNCATE TABLE LMS_SUPPLIERS_DETAILS;
INSERT INTO LMS_SUPPLIERS_DETAILS VALUES
('S01','SINGAPORE SHOPPEE','CHENNAI',98941235,'sing@gmail.com'),
('S02','JK Stores','MUMBAI',99401234,'jks@yahoo.com'),
('S03','ROSE BOOK STORE','TRIVANDRUM',94444112,'rose@gmail.com'),
('S04','KAVARI STORE','DELHI',86300014,'kavi@redif.com'),
('S05','EINSTEN BOOK GALLARY','US',95420000,'eingal@aol.com'),
('S06','AKBAR STORE','MUMBAI',78556231,'akbakst@aol.com');
SELECT * FROM LMS_SUPPLIERS_DETAILS;
